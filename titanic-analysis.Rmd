---
title: "Análisis Exploratorio de Datos: Sobrevivientes del Titanic"
author: "Cristopher Acuña Campos
         Jerson Prendas"
date: "`r Sys.Date()`"
output:
  html_document:
    toc: true
    code_folding: hide
params:
  data_path: "tested.csv"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(
  echo = FALSE,
  warning = FALSE,
  message = FALSE
)
library(tidyverse)
library(plotly)
library(cowplot)
```

# Introducción

Este documento presenta un Análisis Exploratorio de Datos (EDA) sobre el conjunto de datos de los sobrevivientes del Titanic. El objetivo es identificar patrones, tendencias y relaciones entre variables para comprender mejor los factores que influyeron en la supervivencia.

# Descripción del Problema

Durante el hundimiento del Titanic en 1912, hubo factores que influyeron en la probabilidad de supervivencia de los pasajeros. Este análisis busca responder preguntas como:

-   ¿Qué variables individuales (edad, sexo, clase) mostraron patrones de supervivencia?
-   ¿Cómo se relaciona el precio del boleto con la supervivencia?
-   ¿Existen interacciones multidimensionales que expliquen grupos de mayor riesgo?

# Definición de Fuentes de Datos

Los datos utilizados provienen de un archivo CSV con la información de los pasajeros del Titanic, que incluye variables como:

-   `Survived`: indicador de supervivencia (0 = No, 1 = Sí)
-   `Pclass`: clase de pasajero (1 = Primera, 2 = Segunda, 3 = Tercera)
-   `Name`, `Sex`, `Age`, `SibSp`, `Parch`, `Ticket`, `Fare`, `Cabin`, `Embarked`

```{r load-data}
# Cargar los datos
datos <- read_csv(params$data_path)
```

# EDA: Gráficas Unidimensionales

Se generan tres gráficas que muestran la distribución de variables con patrones interesantes.

```{r uni-plots}
# 1. Distribución de edad
ggplot(datos, aes(x = Age)) +
  geom_histogram(bins = 30) +
  labs(title = "Distribución de Edad")

# 2. Conteo por sexo
ggplot(datos, aes(x = Sex)) +
  geom_bar() +
  labs(title = "Conteo de Pasajeros por Sexo")

# 3. Distribución de tarifa (Fare)
ggplot(datos, aes(x = Fare)) +
  geom_histogram(bins = 30) +
  labs(title = "Distribución de la Tarifa")
```

# EDA: Gráficas Bidimensionales

Se exploran combinaciones de dos variables con posible interrelación.

```{r bi-plots}
# Supervivencia vs Clase y Sexo
p1 <- ggplot(datos, aes(x = Pclass, fill = factor(Survived))) +
  geom_bar(position = "fill") +
  labs(title = "Proporción de Supervivientes por Clase")

# Edad vs Tarifa coloreado por supervivencia
p2 <- ggplot(datos, aes(x = Age, y = Fare, color = factor(Survived))) +
  geom_point(alpha = 0.6) +
  labs(title = "Edad vs Tarifa según Supervivencia")

subplot(ggplotly(p1), ggplotly(p2), nrows = 2)
```

# EDA: Gráfica Multidimensional

Se incorpora al menos una gráfica con cinco variables simultáneas.

```{r multi-plot}
plot_ly(datos, x = ~Age, y = ~Fare, color = ~factor(Pclass), symbol = ~factor(Sex), size = ~SibSp,
        text = ~paste("Sobrevivió:", Survived)) %>%
  layout(title = "Multidimensional: Edad, Tarifa, Clase, Sexo, SibSp")
```

# Facetas

```{r facetas}
# Faceta por Embarque y Sexo mostrando edad vs tarifa
ggplot(datos, aes(x = Age, y = Fare)) +
  geom_point(alpha = 0.5) +
  facet_grid(Embarked ~ Sex) +
  labs(title = "Edad vs Tarifa por Embarque y Sexo")
```

# Imagen Compuesta

```{r composite-plot}
# Composición con tres gráficos: tarifa, edad y clase
plot_grid(
  ggplot(datos, aes(x = Fare)) + geom_histogram(bins = 30),
  ggplot(datos, aes(x = Age)) + geom_histogram(bins = 30),
  ggplot(datos, aes(x = factor(Pclass), fill = factor(Survived))) + geom_bar(),
  ncol = 1,
  labels = c("Tarifa", "Edad", "Supervivencia por Clase")
)
```

# Conclusiones

En esta sección se describen las conclusiones principales, reflejando los hallazgos más relevantes del análisis.
